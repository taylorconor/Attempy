{% extends "base.html" %}

{% block title %}
Editor
{% endblock %}

{% block head %}
<style type="text/css" media="screen">
    #editor {
/*        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;*/
        height: 500px;
    }
    #pml_source{
        display: none;
    }
</style>
{% endblock %}

{% block content %}
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="nav1">
          <ul class="nav navbar-nav">
            <li><a href="{{url_for('home.index')}}">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">File<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li>
                    <a href="#">
                        <form id="upload" action="" method="post" enctype="multipart/form-data">
                        <label for="file"> Upload </label>
                        <input style="display:none" type="file" name="file" id="file" /><br/>
                        </form>
                        <script>
                            window.onload = function(){
                                $('#file').change(function(){
                                    $('#upload').submit();
                                });
                                {% if source is not none %}
                                var editor = ace.edit("editor");
                                editor.setValue("{{source}}");
                                {% endif %}
                            }
                        </script>

                    </a>
                </li>	
              </ul>
            </li>
	    <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Edit<span class="caret"></span></a>
               <ul class="dropdown-menu">
		<li>
                    <a href="#" onclick="editor.execCommand('showSettingsMenu')">
                        <label> Editor Preferences </label>
                    </a>
		</li>
		</ul>
	    </li>
          </ul>
 
          <ul class="nav navbar-nav navbar-right">
            {% if current_user.is_authenticated %}
                <li><a href="{{url_for('auth.logout')}}">Logout</a></li>
            {% else %}
                <li><a href="{{url_for('auth.login')}}">Login</a></li>
            {% endif %}
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <div class="container-fluid">
        <div class="jumbotron">
            <div id="editor"></div>
            <br>
            <div class="form-group">
                <button type="submit" id="check_syn" class="btn btn-default" form="pml_source_form">Check Syntax</button>
    
	            <div id="pml-output" role="alert" style="display: none; float: left;">
	              	<span id="pml-output-glyph" aria-hidden="true"></span>
	              	<samp id="pml-output-text"> </samp>
	            </div>
            </div>
        </div>
    </div>

<script src="{{ url_for('static', filename='ace/build/src/ace.js') }}"></script>
<script src="{{ url_for('static', filename='ace-grammar/build/ace_grammar.min.js') }}"></script>
<script src="{{ url_for('static', filename='ace/build/src/ext-language_tools.js') }}"></script>
<script src="{{ url_for('static', filename='js/custom_ace.js') }}"></script>
<script src="{{ url_for('static', filename='js/submit_pml.js') }}"></script>


{% endblock %}


